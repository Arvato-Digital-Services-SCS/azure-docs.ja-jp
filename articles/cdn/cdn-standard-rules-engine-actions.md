---
title: Azure CDN from Microsoft 標準ルール エンジンのアクション | Microsoft Docs
description: Azure CDN from Microsoft 標準ルール エンジンのアクションに関するリファレンス ドキュメント。
services: cdn
author: mdgattuso
ms.service: azure-cdn
ms.topic: article
ms.date: 11/01/2019
ms.author: magattus
ms.openlocfilehash: dbde93cc7ffd21e341653407e6e4f910e4620974
ms.sourcegitcommit: b2fb32ae73b12cf2d180e6e4ffffa13a31aa4c6f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/05/2019
ms.locfileid: "73615850"
---
# <a name="azure-cdn-from-microsoft-standard-rules-engine-actions"></a>Azure CDN from Microsoft 標準ルール エンジンのアクション

この記事では、Azure Content Delivery Network (CDN) from Microsoft [標準ルール エンジン](cdn-standard-rules-engine.md)で利用できるアクションについて詳しく説明します。

ルールの 2 番目の部分は、アクションです。 アクションでは、一連の一致条件によって特定される要求の種類に適用される動作を定義します。

## <a name="actions"></a>Actions

次のアクションを使用できます。 

## <a name="cache-expiration"></a>キャッシュの有効期限

このアクションでは、ルールの一致条件で指定された要求のエンドポイントの TTL を上書きできます。

**必須フィールド**

キャッシュの動作 |                
---------------|----------------
Bypass Cache (キャッシュ バイパス) | このオプションが選択され、ルールが一致する場合、コンテンツはキャッシュされません。
オーバーライド | このオプションが選択され、ルールが一致する場合、配信元から返される TTL 値は、アクションで指定された値で上書きされます。
存在しない場合に設定 | このオプションが選択され、ルールが一致するときに、配信元から返される TTL 値がない場合、ルールによって TTL がアクションで指定された値に設定されます。

**追加フィールド**

日数 | 時間 | 分 | Seconds
-----|-------|---------|--------
int | int | int | int 

## <a name="cache-key-query-string"></a>キャッシュ キーのクエリ文字列

この操作では、クエリ文字列に基づいてキャッシュ キーを変更できます。

**必須フィールド**

動作 | 説明
---------|------------
Include (含める) | このオプションが選択され、ルールが一致する場合、パラメーターに指定されたクエリ文字列がキャッシュ キーの生成時に含められます。 
一意の URL をすべてキャッシュ | このオプションが選択され、ルールが一致する場合、一意の URL ごとに独自のキャッシュ キーが設定されます。 
Exclude (除外) | このオプションが選択され、ルールが一致する場合、パラメーターに指定されたクエリ文字列がキャッシュ キーの生成時に除外されます。
クエリ文字列を無視 | このオプションが選択され、ルールが一致する場合、キャッシュ キーの生成時にクエリ文字列が考慮されません。 

## <a name="modify-request-header"></a>要求ヘッダーの変更

このアクションにより、配信元に送信される要求に含まれるヘッダーを変更できます。

**必須フィールド**

Action | HTTP ヘッダー名 | 値
-------|------------------|------
Append | このオプションが選択され、ルールが一致する場合、ヘッダー名に指定されたヘッダーが、指定された値で要求に追加されます。 ヘッダーが既に存在する場合、値は既存の値に追加されます。 | string
上書き | このオプションが選択され、ルールが一致する場合、ヘッダー名に指定されたヘッダーが、指定された値で要求に追加されます。 ヘッダーが既に存在する場合、値は既存の値を上書きします。 | string
削除 | このオプションが選択され、ルールが一致し、ルールで指定されたヘッダーが存在する場合、ヘッダーが要求から削除されます。 | string

## <a name="modify-response-header"></a>応答ヘッダーの変更

このアクションにより、エンド クライアントに返される応答に含まれるヘッダーを変更できます。

**必須フィールド**

Action | HTTP ヘッダー名 | 値
-------|------------------|------
Append | このオプションが選択され、ルールが一致する場合、ヘッダー名に指定されたヘッダーが、指定された値で応答に追加されます。 ヘッダーが既に存在する場合、値は既存の値に追加されます。 | string
上書き | このオプションが選択され、ルールが一致する場合、ヘッダー名に指定されたヘッダーが、指定された値で応答に追加されます。 ヘッダーが既に存在する場合、値は既存の値を上書きします。 | string
削除 | このオプションが選択され、ルールが一致し、ルールで指定されたヘッダーが存在する場合、ヘッダーが応答から削除されます。 | string

## <a name="url-redirect"></a>URL Redirect (URL リダイレクト)

このアクションにより、エンド クライアントを新しい URL にリダイレクトすることができます。 

**必須フィールド**

フィールド | 説明 
------|------------
種類 | 要求元に返される応答タイプを選択します。 オプションは、302 (検出済み)、301 (移動済み)、307 (一時リダイレクト)、および 308 (永続的リダイレクト) です。
Protocol | 一致要求、HTTP、または HTTPS
ホスト名 | 要求のリダイレクト先となるホスト名を選択します。 受信ホストを保持するには、空のままにします。
Path | リダイレクトで使用するパスを定義します。 受信パスを保持するには、空のままにします。  
クエリ文字列 | リダイレクトで使用されるクエリ文字列を定義します。 受信クエリ文字列を保持するには、空のままにします。 
フラグメント | リダイレクトで使用するフラグメントを定義します。 受信フラグメントを保持するには、空のままにします。 

絶対 URL を使用することを強くお勧めします。 相対 URL を使用すると、CDN の URL が無効なパスにリダイレクトされることがあります。 

## <a name="url-rewrite"></a>URL Rewrite (URL 書き換え)

このアクションにより、発信元に渡される要求のパスを書き換えることができます。

**必須フィールド**

フィールド | 説明 
------|------------
ソース パターン | 置換する URL パス内のソース パターンを定義します。 現在、ソース パターンではプレフィックスに基づく一致が使用されます。 すべての URL パスを一致させるには、ソース パターン値として "/" を使用します。
Destination | 書き換えに使用する宛先パスを定義します。 これにより、ソース パターンが上書きされます
一致しないパスを保持する | [はい] の場合、ソース パターンの後の残りのパスが新しい宛先パスに追加されます。 


[先頭に戻る](#actions)

</br>

## <a name="next-steps"></a>次の手順

- [Azure Content Delivery Network の概要](cdn-overview.md)
- [ルール エンジンのリファレンス](cdn-standard-rules-engine-reference.md)
- [ルール エンジンの一致条件](cdn-standard-rules-engine-match-conditions.md)
- [標準ルールエンジンを使用して HTTPS を適用する](cdn-standard-rules-engine.md)
