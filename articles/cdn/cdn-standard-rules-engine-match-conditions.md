---
title: Azure CDN from Microsoft 標準ルール エンジンの一致条件 | Microsoft Docs
description: Azure Content Delivery Network from Microsoft 標準ルール エンジンの一致条件に関するリファレンス ドキュメント。
services: cdn
author: mdgattuso
ms.service: azure-cdn
ms.topic: article
ms.date: 11/01/2019
ms.author: magattus
ms.openlocfilehash: a72452d37b152a9463a5aee0e199fd42ea852236
ms.sourcegitcommit: b2fb32ae73b12cf2d180e6e4ffffa13a31aa4c6f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/05/2019
ms.locfileid: "73615842"
---
# <a name="azure-cdn-from-microsoft-standard-rules-engine-match-conditions"></a>Azure CDN from Microsoft 標準ルール エンジンの一致条件

この記事では、Azure Content Delivery Network (CDN) from Microsoft [標準ルール エンジン](cdn-standard-rules-engine.md)で利用できる一致条件について詳しく説明します。

ルールの最初の部分は、一連の一致条件です。 各ルールには、最大 4 つの一致条件を含めることができます。 一致条件とは、要求の特定の種類を識別するものであり、その種類に対してルールに定義されているアクションが実行されます。 複数の一致条件を使用すると、AND ロジックを使用してグループ化されます。

たとえば、以下のような場合に一致条件を使用できます。

- 特定の IP アドレスまたは国/地域から生成された要求をフィルター処理する。
- ヘッダー情報別に要求をフィルター処理する。
- モバイル デバイスまたはデスクトップ デバイスからの要求をフィルター処理する。

## <a name="match-conditions"></a>一致条件

次の一致条件を使用できます。 

### <a name="device-type"></a>デバイスの種類 

「デバイスの種類」一致条件は、モバイル デバイスまたはデスクトップ デバイスからの要求をそのプロパティに基づいて識別します。  

**必須フィールド**

Operator | サポートされる値
---------|----------------
等しい、等しくない | Mobile、Desktop


### <a name="http-version"></a>HTTP バージョン

HTTP バージョン一致条件は、要求が到着した HTTP のバージョンに基づいて要求を識別します。

**必須フィールド**

Operator | サポートされる値
---------|----------------
等しい、等しくない | 2.0、1.1、1.0、0.9、All


### <a name="request-cookies"></a>要求 Cookie

要求 Cookie 一致条件は、受信した要求の Cookie 情報に基づいて要求を識別します。

**必須フィールド**

Cookie 名 | Operator | Cookie 値 | 大文字と小文字の変換
------------|----------|--------------|---------------
string | [標準の演算子一覧](#standard-operator-list) | String、Int | 変換なし、大文字に変換、小文字に変換

重要な情報
- Cookie 名を指定するときに、アスタリスク (*) を含むワイルドカード値はサポートされておらず、Cookie 名の完全一致だけが比較の対象となります。
- この一致条件のインスタンスごとに、1 つの Cookie 名のみを指定できます。
- Cookie 名の比較では、大文字と小文字は区別されません。
- 複数の Cookie 値を指定する場合は、値ごとに単一の空白で区切ります。 
- Cookie 値には、ワイルドカード値を利用できます。
- ワイルドカード値が指定されていない場合は、完全一致だけがこの一致条件を満たします。 たとえば、"Value" を指定すると "Value" と一致し、"Value1" とは一致しません。 

### <a name="post-argument"></a>POST 引数

**必須フィールド**

引数名 | Operator | 引数値 | 大文字と小文字の変換
--------------|----------|----------------|---------------
string | [標準の演算子一覧](#standard-operator-list) | String、Int | 変換なし、大文字に変換、小文字に変換

### <a name="query-string"></a>クエリ文字列

クエリ文字列の一致条件は、指定されたクエリ文字列パラメーターを含む要求を識別します。 このパラメーターは、指定したパターンに一致する値に設定されます。 要求 URL のクエリ文字列パラメーター (例: parameter=value) によって、この条件が満たされているかどうかが決まります。 この一致条件は、クエリ文字列パラメーターを名前で識別し、パラメーター値として 1 つ以上の値を受け入れます。

**必須フィールド**

Operator | クエリ文字列 | 大文字と小文字の変換
---------|--------------|---------------
[標準の演算子一覧](#standard-operator-list) | String、Int | 変換なし、大文字に変換、小文字に変換

### <a name="remote-address"></a>リモート アドレス

リモート アドレスの一致条件は、要求者の位置情報または IP アドレスに基づいて要求を識別します。

**必須フィールド**

Operator | サポートされる値
---------|-----------------
Any | 該当なし
geo の一致 | 国コード
IP の一致 | IP アドレス (スペースで区切られた)
いずれでもありません | 該当なし
geo の一致ではない | 国コード
IP の一致ではない | IP アドレス (スペースで区切られた)

重要な情報:

- CIDR 表記を使用します。
- 複数の IP アドレスまたは IP アドレス ブロックを指定する場合は、IP アドレスまたは IP ブロックごとに単一の空白で区切ります。 例:
  - **IPv4 の例**:"1.2.3.4 10.20.30.40" と指定した場合、アドレス 1.2.3.4 または 10.20.30.40 から配信される要求と一致します。
  - **IPv6 の例**:"1:2:3:4:5:6:7:8 10:20:30:40:50:60:70:80" と指定した場合、アドレス 1:2:3:4:5:6:7:8 または 10:20:30:40:50:60:70:80 から配信される要求と一致します。
- IP アドレス ブロックの構文では、ベース IP アドレスの末尾にスラッシュおよびプレフィックス サイズを付与します。 例:
  - **IPv4 の例**:"5.5.5.64/26" と指定した場合、アドレス 5.5.5.64 ～ 5.5.5.127 から配信される要求と一致します。
  - **IPv6 の例**:"1:2:3:/48" と指定した場合、アドレス 1:2:3:0:0:0:0:0 ～ 1:2:3:ffff:ffff:ffff:ffff:ffff から配信される要求と一致します。

### <a name="request-body"></a>要求本文

**必須フィールド**

Operator | 要求本文 | 大文字と小文字の変換
---------|--------------|---------------
[標準の演算子一覧](#standard-operator-list) | String、Int | 変換なし、大文字に変換、小文字に変換

### <a name="request-header"></a>要求ヘッダー

**必須フィールド**
ヘッダー名 | Operator | ヘッダー値 | 大文字と小文字の変換
------------|----------|--------------|---------------
string | [標準の演算子一覧](#standard-operator-list) | String、Int | 変換なし、大文字に変換、小文字に変換

### <a name="request-method"></a>Request Method (要求メソッド)

**必須フィールド**

Operator | サポートされる値
---------|----------------
等しい、等しくない | GET、POST、PUT、DELETE、HEAD、OPTIONS、TRACE

重要な情報:

- GET 要求メソッドのみが、CDN 上にキャッシュされたコンテンツを生成できます。 その他のすべての要求メソッドは、ネットワーク経由でプロキシ化されます。 

### <a name="request-protocol"></a>要求プロトコル

**必須フィールド**

Operator | サポートされる値
---------|----------------
等しい、等しくない | HTTP、HTTPS

### <a name="request-url"></a>要求 URL

**必須フィールド**

Operator | 要求 URL | 大文字と小文字の変換
---------|-------------|---------------
[標準の演算子一覧](#standard-operator-list) | String、Int | 変換なし、大文字に変換、小文字に変換

重要な情報:

- 要求 URL を入力するときは、プロトコル情報が含まれていることを確認してください。 たとえば、"https://www.[yourdomain].com"です。

### <a name="url-file-extension"></a>URL のファイル拡張子

**必須フィールド**

Operator | 拡張機能 | 大文字と小文字の変換
---------|-----------|---------------
[標準の演算子一覧](#standard-operator-list) | String、Int | 変換なし、大文字に変換、小文字に変換

重要な情報:

- 拡張子に関して、先頭にピリオドを使用しないでください。たとえば、".html" ではなく "html" を使用します。

### <a name="url-file-name"></a>URL のファイル名

**必須フィールド**

Operator | ファイル名 | 大文字と小文字の変換
---------|-----------|---------------
[標準の演算子一覧](#standard-operator-list) | String、Int | 変換なし、大文字に変換、小文字に変換

重要な情報:

- 複数のファイル名を指定するには、各ファイル名を単一のスペースで区切ります。 

### <a name="url-path"></a>URL パス

**必須フィールド**

Operator | 値 | 大文字と小文字の変換
---------|-------|---------------
[標準の演算子一覧](#standard-operator-list) | String、Int | 変換なし、大文字に変換、小文字に変換

重要な情報:

- ファイル名の値には、ワイルドカード値を利用できます。 たとえば、各ファイル名パターンを 1 つ以上のアスタリスク (*) で構成できます。各アスタリスクは 1 つ以上の一連の文字と一致します。

## <a name="reference-for-rules-engine-match-conditions"></a>ルール エンジンの一致条件のリファレンス

### <a name="standard-operator-list"></a>標準の演算子一覧

標準の演算子リストを含むルールの場合、次の演算子が有効です。

- Any
- 等しい 
- Contains 
- 次の値で始まる 
- 次の値で終わる 
- より小さい
- 以下
- より大きい
- 以上
- いずれでもありません
- 含まない
- 次の値で始まらない 
- 次の値で終わらない 
- 次の値より小さくない
- 次の値以下ではない
- 次の値より大きくない
- 次の値以上ではない

"より小さい" または "以上" のような数値演算子の場合、比較は長さに基づいて行われます。 この場合、一致条件の値は、比較する長さと同じ整数となります。 

---

[先頭に戻る](#match-conditions)

</br>

## <a name="next-steps"></a>次の手順

- [Azure Content Delivery Network の概要](cdn-overview.md)
- [ルール エンジンのリファレンス](cdn-standard-rules-engine-reference.md)
- [ルール エンジンのアクション](cdn-standard-rules-engine-actions.md)
- [標準ルール エンジンを使用して HTTPS を適用する](cdn-standard-rules-engine.md)
