---
title: Azure App Configuration 機能の管理
description: Azure App Configuration を使用して、必要に応じてアプリケーションの機能を有効/無効にする方法の概要。
author: lisaguthrie
ms.author: lcozzens
ms.service: azure-app-configuration
ms.topic: conceptual
ms.date: 04/19/2019
ms.openlocfilehash: 85228854f6c106c68cedc3eeea81e15fd662774a
ms.sourcegitcommit: 67e9f4cc16f2cc6d8de99239b56cb87f3e9bff41
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/31/2020
ms.locfileid: "76898739"
---
# <a name="feature-management-overview"></a>機能管理の概要

従来、新しいアプリケーション機能の配布には、アプリケーション自体を完全に再デプロイする必要がありました。 機能をテストするには、アプリケーションを何回もデプロイして、機能がいつ表示されるかや、だれに表示されるかを制御する必要が生じる場合があります。

機能管理は、機能リリースをコード デプロイから切り離し、必要に応じて機能の可用性を迅速に変更できる最新のソフトウェア開発手法です。 "*機能フラグ*" と呼ばれる ("*フィーチャー トグル*"、"*機能スイッチ*" などとも呼ばれる) 手法を使用して、機能のライフサイクルを動的に管理します。

機能管理により、開発者は、以下の問題に対処できます。

* **コードの分岐管理**:機能フラグは、開発中の新しいアプリケーション機能をラップするためによく使用されます。 こうした機能は、既定では「非表示」になっています。 機能が未完成でも安全に配布でき、運用環境では休止中のままになります。 "*ダーク デプロイ*" と呼ばれるこの方法を使用すれば、各開発サイクルの最後にすべてのコードをリリースできます。 機能が 1 サイクル内に完成しなくても、複数のサイクルにわたってコードの分岐を維持する必要がなくなりました。
* **運用環境でのテスト**:機能フラグを使用して、運用環境の新しい機能への早期アクセスを許可できます。 たとえば、チーム メンバーまたは社内のベータ テスト担当者のみにこうしたアクセスを制限できます。 これらのユーザーは、テスト環境での疑似体験または部分的体験ではなく、完全に忠実な運用環境を体験できます。
* **フライティング**:機能フラグを使用して、エンド ユーザーに新しい機能を段階的にロールアウトすることもできます。 最初に全ユーザーのうちの少数のユーザーをターゲットにし、実装に対する自信が高まった後で、その割合を徐々に増やすことができます。
* **インスタント キル スイッチ**:機能フラグは、新しい機能をリリースするための固有のセーフティ ネットを提供します。 これを使用することで、アプリケーションの機能を簡単に有効または無効にすることができます。 必要に応じて、アプリケーションの再構築や再デプロイをする必要なく、速やかに機能を無効にできます。
* **選択的アクティベーション**:ほとんどの機能フラグは、関連付けられている機能が正常にリリースされるまでの間だけ存在しますが、中には長期にわたって存続するものもあります。 機能フラグでユーザーをセグメント化して、各グループに特定の機能セットを提供する手段として使用できます。 たとえば、特定の Web ブラウザーだけで動作する機能があるとします。 そのブラウザーのユーザーのみが機能を表示および使用できるように、機能フラグを定義できます。 この方法では、コードを変更することなく、サポートされるブラウザーの一覧を後で簡単に拡張できます。

## <a name="basic-concepts"></a>基本的な概念

機能管理に関連するいくつかの新しい用語を以下に示します。

* **機能フラグ**:機能フラグは、"*オン*" または "*オフ*" のバイナリ状態を持つ変数です。 機能フラグは、関連付けられたコード ブロックも持ちます。 機能フラグの状態によって、コード ブロックが実行されるかどうかが決まります。
* **機能マネージャー**:機能マネージャーは、アプリケーションのすべての機能フラグのライフサイクルを処理するアプリケーション パッケージです。 機能マネージャーは、通常、機能フラグのキャッシュやその状態の更新などの追加機能を提供します。
* **フィルター**:フィルターは、機能フラグの状態を評価するためのルールです。 ユーザー グループ、デバイスまたはブラウザーの種類、地理的場所、時間枠はすべて、フィルターが表すことができるものの例です。

機能管理の効果的な実装は、次のように、協調して動作する少なくとも 2 つのコンポーネントで構成されます。

* 機能フラグを使用するアプリケーション。
* 機能フラグとその現在の状態を格納する個別のリポジトリ。

これらのコンポーネントの相互作用を次の図で例示します。

## <a name="feature-flag-usage-in-code"></a>コードでの機能フラグの使用法

アプリケーションに機能フラグを実装するための基本的なパターンはシンプルです。 機能フラグは、コード内の `if` 条件付きステートメントで使用されるブール型状態変数として考えることができます。

```csharp
if (featureFlag) {
    // Run the following code
}
```

この場合、`featureFlag` が `True` に設定されていれば、囲まれたコード ブロックが実行され、それ以外であればスキップされます。 次のコード例のように、`featureFlag` の値を静的に設定できます。

```csharp
bool featureFlag = true;
```

特定の規則に基づいて、フラグの状態を評価することもできます。

```csharp
bool featureFlag = isBetaUser();
```

もう少し複雑な機能フラグのパターンには、`else` ステートメントも含まれます。

```csharp
if (featureFlag) {
    // This following code will run if the featureFlag value is true
} else {
    // This following code will run if the featureFlag value is false
}
```

ただし、この動作は、基本的なパターンで書き換えることができます。 [ASP.NET Core アプリ内での機能フラグの使用](./use-feature-flags-dotnet-core.md)に関するページでは、単純なコード パターンで標準化する利点を示しています。 次に例を示します。

```csharp
if (featureFlag) {
    // This following code will run if the featureFlag value is true
}

if (!featureFlag) {
    // This following code will run if the featureFlag value is false
}
```

## <a name="feature-flag-repository"></a>機能フラグのリポジトリ

機能フラグを効果的に使用するには、アプリケーションで使用するすべての機能フラグを外部化する必要があります。 この方法により、アプリケーション自体を変更および再デプロイすることなく、機能フラグの状態を変更できます。

Azure App Configuration は、機能フラグ用の集中リポジトリとして設計されています。 これを使用すると、さまざまな種類の機能フラグを定義し、その状態をすばやく確実に操作できます。 その後、さまざまなプログラミング言語フレームワークの App Configuration ライブラリを使用して、お使いのアプリケーションからこれらの機能フラグに簡単にアクセスできます。

[ASP.NET Core アプリ内での機能フラグの使用](./use-feature-flags-dotnet-core.md)に関するページでは、お使いの ASP.NET Web アプリケーションの機能フラグを実装するために .NET Core App Configuration プロバイダーと機能管理ライブラリを一緒に使用する方法について説明します。

## <a name="next-steps"></a>次のステップ

> [!div class="nextstepaction"]
> [ASP.NET Core Web アプリに機能フラグを追加する](./quickstart-feature-flag-aspnet-core.md)  
