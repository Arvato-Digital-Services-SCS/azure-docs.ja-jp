---
title: カスタム コマンドの概念と定義 - 音声サービス
titleSuffix: Azure Cognitive Services
description: この記事では、カスタム コマンド アプリケーションの概念と定義について説明します。
services: cognitive-services
author: singhsaumya
manager: yetian
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 06/18/2020
ms.author: sausin
ms.openlocfilehash: 5a5e3590e0e184633760f080dfd3402ed75bd48e
ms.sourcegitcommit: 4042aa8c67afd72823fc412f19c356f2ba0ab554
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/24/2020
ms.locfileid: "85307270"
---
# <a name="custom-commands-concepts-and-definitions"></a>カスタム コマンドの概念と定義

この記事は、カスタム コマンド アプリケーションの概念と定義のリファレンスとしてお使いいただけます。

## <a name="commands-configuration"></a>コマンドの構成
コマンドは、カスタム コマンド アプリケーションの基本的な構成要素です。 コマンドは、ユーザーが定義した特定のタスクを完了するために必要な構成のセットです。

### <a name="example-sentences"></a>例文
発話の例は、ユーザーが特定のコマンドをトリガーするために言うことができるセットの例です。 完全な一覧ではなく、発話のサンプルのみを指定する必要があることにご注意ください。 

### <a name="parameters"></a>パラメーター
パラメーターは、コマンドがタスクを完了するために必要な情報です。 複雑なシナリオでは、パラメーターを使用して、カスタム アクションをトリガーする条件を定義することもできます。

### <a name="completion-rules"></a>完了ルール
コマンドが実行される準備が整ったとき、つまりルールのすべての条件が満たされたときに実行される一連のルールです。

### <a name="interaction-rules"></a>相互作用ルール
より具体的または複雑な状況に対処するための追加ルール。 さらに検証を追加したり、確認やワンステップ修正などの高度な機能を構成したりすることができます。 独自のカスタム相互作用ルールを作成することもできます。

## <a name="parameters-configuration"></a>パラメーターの構成

パラメーターは、コマンドがタスクを完了するために必要な情報です。 複雑なシナリオでは、パラメーターを使用して、カスタム アクションをトリガーする条件を定義することもできます。

### <a name="name"></a>名前
パラメーターは、name プロパティによって識別されます。 パラメーターには、常にわかりやすい名前を付ける必要があります。 パラメーターは、条件、音声応答、またはその他のアクションを構築しているときなど、さまざまなセクションで参照できます。
 
### <a name="isglobal"></a>IsGlobal
このパラメーターのスコープをアプリケーションのすべてのコマンドで共有するかどうかを示すチェックボックス。 パラメーターがグローバルである場合、その値は任意のコマンド スコープから指定できます。値が代入されると、どのコマンドからでも参照できます。 

### <a name="required"></a>必須
コマンドのフルフィルメントまたは完了に、このパラメーターの値が必要かどうかを示すチェックボックス。 パラメーターが必須とマークされている場合は、ユーザーに値を指定するように求める応答を構成する必要があります。

### <a name="type"></a>Type
カスタム コマンドでは、次のパラメーターの型がサポートされています。


* DateTime
* [地理的な場所]
* Number
* String

これらのパラメーターの型はすべて、ポータルから構成できる既定値の構成をサポートしています。

### <a name="configuration"></a>構成
構成は、型に対してのみ定義されるパラメーター プロパティです。文字列 をオンにします。 次の値がサポートされています。
* なし
* Accept full input\(完全な入力を受け入れる\):このオプションを有効にすると、パラメーターは任意の入力の発話を受け入れます。これは、ユーザーが完全な発話を持つパラメーターを必要とする場合に便利です。 例として郵便の宛先などがあります。
* Accept predefined input values from external catalog\(外部カタログから定義済みの入力値を受け入れる\): さまざまな値を想定できるパラメーターを構成するために使用します。 例として販売カタログなどがあります。 この場合、カタログは外部 Web エンドポイントでホストされ、個別に構成することができます。
* Accept predefined input values from internal catalog\(内部カタログから定義済みの入力値を受け入れる\): いくつかの値を想定できるパラメーターを構成するために使用します。 この場合は、Speech Studio で値を構成する必要があります。


### <a name="validation"></a>検証
検証は、特定のパラメーターの型に適用できるコンストラクトで、これによりパラメーターの値に制約を構成することができます。 現在、カスタム コマンドでは、次のパラメーターの型に対する検証がサポートされています。
* DateTime
* Number

## <a name="rules-configuration"></a>ルールの構成
カスタム コマンドのルールは、一連の**条件**によって定義され、条件が満たされると、一連の**アクション**が実行されます。 ルールを使用すると、**実行後の状態**や次のターンの**期待される回答**を構成することもできます。

### <a name="types"></a>型
カスタム コマンドでは、次のルール カテゴリがサポートされています。
* 完了ルール

    コマンドのフルフィルメント時に実行されるルールのリスト。 このセクションで構成される条件が真であるすべてのルールが実行されます。
    
* 相互作用ルール

    相互作用ルールは、追加のカスタム検証、確認、ワンステップ修正を構成したり、その他のカスタム ダイアログ ロジックを実行したりするために使用できます。 これらのルールは、ターン処理ごとに評価され、完了ルールをトリガーするために使用できます。

ルールの一部として構成されるさまざまなアクションは、作成ポータルに表示される順序で実行されます。
    
### <a name="conditions"></a>条件
ルールを実行するために満たす必要がある一連の条件。 ルールの条件は次のいずれかの種類になります。
* Parameter value equals\(パラメーター値が等しい\): 構成されているパラメーターの値が特定の値と同じです。
* No parameter value\(パラメーター値がない\): 構成済みのパラメーターに値を指定することはできません。
* Required parameters\(必須のパラメーター\): 構成済みのパラメーターに値があります。
* All required parameters\(すべての必須パラメーター\): 必須とマークされているすべてのパラメーターに値があります。
* Updated parameters\(更新されたパラメーター\): 現在の入力 (発話またはアクティビティ) を処理した結果として 1 つ以上のパラメーター値が更新されました。
* Confirmation was successful\(確認が成功した\): 入力の発話またはアクティビティは正常に確認されました (yes)。
* Confirmation was denied\(確認が拒否されました\): 入力の発話またはアクティビティは正常に確認されました (no)。
* Previous command needs to be updated\(前のコマンドの更新が必要\): この条件は、更新と共に否定確認をキャッチする場合に、インスタンスで使用されます。 これは、バックグラウンドで、ダイアログ エンジンによって意図が前のターンと同じであるという否定的な確認が検出され、ユーザーが更新で応答したときに構成されます。

### <a name="actions"></a>Actions
* Send speech response\(音声応答の送信\): クライアントに音声応答を送り返します。
* Update parameter value\(パラメーター値の更新\): コマンド パラメーターの値を指定された値に更新します。
* Clear parameter value\(パラメーター値のクリア\): コマンド パラメーター値をクリアします。
* Call web endpoint\(Web エンドポイントの呼び出し\): Web エンドポイントを呼び出します。
* Send activity to client\(クライアントへのアクティビティの送信\): クライアントにカスタム アクティビティを送信します。

### <a name="expectations"></a>期待される回答
期待される回答は、次のユーザー入力の処理に対してヒントを構成するために使用されます。 次の種類がサポートされています。
* Expecting confirmation from user\(ユーザーからの確認が必要\): アプリケーションによって、次のユーザー入力に対する確認 (yes/no) が要求されていることを指定します。
* Expecting parameter(s) input from user\(ユーザーからのパラメーター入力が必要\): アプリケーションによってユーザー入力に要求されるコマンド パラメーターを 1 つ以上指定します。

### <a name="post-execution-state"></a>実行後の状態
現在の入力を処理した後のダイアログの状態 (発話またはアクティビティ)。 次のいずれかの種類になります。
* Command completed\(コマンドが完了\): コマンドは完了し、これ以上コマンドのルールは処理されません。
* Execute completion rules\(完了ルールの実行\): 有効なすべての完了ルールを実行します。
* Wait for user's input\(ユーザーの入力を待機\): 次のユーザー入力を待ちます。

## <a name="next-steps"></a>次のステップ

> [!div class="nextstepaction"]
> [GitHub のサンプルを参照](https://aka.ms/speech/cc-samples)
