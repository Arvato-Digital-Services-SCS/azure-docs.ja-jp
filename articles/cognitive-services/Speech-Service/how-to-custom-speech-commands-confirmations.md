---
title: カスタム コマンド プレビュー アプリに確認を追加する - 音声サービス
titleSuffix: Azure Cognitive Services
description: カスタム コマンド プレビュー アプリで確認をコマンドに追加する方法を説明します。
services: cognitive-services
author: encorona-ms
manager: yetian
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 12/05/2019
ms.author: encorona
ms.openlocfilehash: 1cb0624012b22b6cae2c98bfa6ddc9495e09615d
ms.sourcegitcommit: 69156ae3c1e22cc570dda7f7234145c8226cc162
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/03/2020
ms.locfileid: "84310470"
---
# <a name="add-confirmations-to-a-command-in-a-custom-commands-preview-application"></a>カスタム コマンド プレビュー アプリケーションで確認をコマンドに追加する

この記事では、カスタム コマンド プレビュー アプリのコマンドのための確認を作成する方法について説明します。

## <a name="prerequisites"></a>前提条件

以下の記事の手順を完了してください。
> [!div class="checklist"]
> * [クイック スタート: カスタム コマンド プレビュー アプリを作成する](./quickstart-custom-speech-commands-create-new.md)
> * [クイック スタート: パラメーターを使用してカスタム コマンド プレビュー アプリを作成する](./quickstart-custom-speech-commands-create-parameters.md)

## <a name="create-a-setalarm-command"></a>SetAlarm コマンドを作成する

確認を実際に行ってみるために、アラームを設定する新しいコマンドを作成します。

1. [Speech Studio](https://speech.microsoft.com/) で、作成したカスタム コマンド プレビュー アプリを開きます。
1. 新しい **SetAlarm** コマンドを作成します。
1. 次のような構成の **DateTime** パラメーターを追加します。

   | 設定                           | 推奨値                     |  説明                 |
   | --------------------------------- | -----------------------------------------------------| ------------|
   | **名前**                              | **DateTime**                                | パラメーターのわかりやすい名前                                |
   | **必須**                          | オン                                 | コマンドを完了するにはこのパラメーターの値が必須かどうかを示すチェック ボックス |
   | **Response for a required parameter (必須パラメーターの応答)**   | **Simple editor -> What time? (シンプルなエディター -> 何時ですか?)**                              | 理解されていないとき、このパラメーターの値を問うプロンプト |
   | **Type**                              | **DateTime**                                | Number、String、DateTime、Geography などのパラメーターの型   |
   | **日付の既定値**                     | 日付が指定されていない場合、今日の日付にします            | ユーザーが指定しなかった場合に使用する変数の既定値  |  
   | **時間の既定値**                     | 時間が指定されていない場合、一日の始まりに設定します     |  ユーザーが指定しなかった場合に使用する変数の既定値|

1. いくつかの文例を追加します。
   
    ```
    set an alarm for {DateTime}
    set alarm {DateTime}
    alarm for {DateTime}
   ```

1. 結果を確定する完了ルールを追加します。 次の構成を使用します。

   | 設定    | 推奨値                               |説明                                     |
   | ---------- | ------------------------------------------------------- |-----|
   | **ルールの名前**  | **アラームの設定**                                               |    ルールの目的を説明する名前 |
   | **アクション**    | **音声応答の送信 - OK, alarm set for {DateTime} (OK、アラームを {DateTime} に設定しました)**    |ルール条件が真のときに実行するアクション

## <a name="try-it-out"></a>試してみる

1. 右ペインの上部にある **[トレーニング]** を選択します。

1. トレーニングが完了したら、 **[テスト]** を選択し、以下の操作を試します。
    - 次の内容を入力します。Set alarm for tomorrow at noon
    - 出力:OK, alarm set for 2020-05-02 12:00:00 (OK、アラームを 2020-05-02 12:00:00 に設定しました)
    - 次の内容を入力します。アラームを設定する
    - 出力:What time? (いつに設定しますか?)
    - 次の内容を入力します。5 時
    - 出力:OK, alarm set for 2020-05-01 17:00:00 (OK、アラームを 2020-05-01 17:00:00 に設定しました)

## <a name="add-interaction-rules-for-the-confirmation"></a>確認の相互作用ルールを追加する

相互作用ルールを追加して、確認を作成します。

1. **SetAlarm** コマンドで、中央ペインの **[追加]** を選択し、 **[Interaction rules]\(相互作用ルール\)**  >  **[Confirm command]\(コマンドの確認\)** の順に選択します。

    このルールは、ユーザーにアラームの日付と時刻の確認を要求します。 次の設定を使用します。

   | 設定               | 推奨値                                                                  | 説明                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | **ルールの名前**             | **日付と時刻の確認**                                                                | ルールの目的を説明する名前          |
   | **条件**            | **必須パラメーター - DateTime**                                                    | ルールを実行できるタイミングを決定する条件    |   
   | **アクション**               | **音声応答の送信 -> Are you sure you want to set an alarm for {DateTime}? (アラームを {DateTime} に設定しますか?)**     | ルール条件が真のときに実行するアクション |
   | **期待される回答**          | **ユーザーからの確認が必要**                                                 | 次のターンで期待される回答                      |
   | **実行後の状態**  | **Wait for user's input (ユーザーの入力を待っています)**                                                            | ターン後のユーザーの状態                  |
  
      > [!div class="mx-imgBorder"]
      > ![必須パラメーターの応答を作成する](media/custom-speech-commands/add-validation-set-temperature.png)

1. 承認された確認 (ユーザーが "yes" と言った) のための相互作用ルールを追加します。 次の構成を使用します。

   | 設定               | 推奨値                                                                  | 説明                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | **ルールの名前**             | **承認された確認**                                                            | ルールの目的を説明する名前          |
   | **条件**            | **確認の成功と必須のパラメーター -> DateTime**                      | ルールを実行できるタイミングを決定する条件    |   
   | **実行後の状態** | **完了ルールの実行**                                                          | ターン後のユーザーの状態                   |

1. 拒否された確認 (ユーザーが "no" と言った) のための相互作用ルールを追加します。 次の構成を使用します。

   | 設定               | 推奨値                                                                  | 説明                                        |
   | --------------------- | -------------------------------------------------------------------------------- | -------------------------------------------------- |
   | **ルールの名前**             | **拒否された確認**                                                                   | ルールの目的を説明する名前          |
   | **条件**            | **確認の拒否と必須のパラメーター -> DateTime**                               | ルールを実行できるタイミングを決定する条件    |   
   | **アクション**               | **パラメーターの値をクリアする -> DateTime および音声応答の送信 -> No problem, what time then? (問題ありません。ではいつに設定しますか?)**  | ルール条件が真のときに実行するアクション |
   | **実行後の状態** | **入力を待機する**                                                                   | ターン後のユーザーの状態                   |
   | **期待される回答**          | **ユーザーからのパラメーター入力が必要 -> DateTime**                           | 次のターンで期待される回答                      |

## <a name="try-out-the-changes"></a>変更を試す

1. **[Train]\(トレーニング\)** を選択します。

1. トレーニングが完了したら、 **[テスト]** を選択し、以下の操作を試します。

    - 次の内容を入力します。Set alarm for tomorrow at noon
    - 出力:Are you sure you want to set an alarm for 2020-05-02 12:00:00? (アラームを 2020-05-02 12:00:00 に設定しますか?)
    - 次の内容を入力します。いいえ
    - 出力:No problem, what time then? (問題ありません。ではいつに設定しますか?)
    - 次の内容を入力します。5 時
    - 出力:"Are you sure you want to set an alarm for 2020-05-01 17:00:00?" (アラームを 2020-05-01 17:00:00 に設定しますか?)
    - 次の内容を入力します。はい
    - 出力:OK, alarm set for 2020-05-01 17:00:00 (OK、アラームを 2020-05-01 17:00:00 に設定しました)

## <a name="next-steps"></a>次のステップ

> [!div class="nextstepaction"]
> [カスタム コマンド プレビュー アプリのコマンドにワンステップ修正を追加する](./how-to-custom-speech-commands-one-step-correction.md)
