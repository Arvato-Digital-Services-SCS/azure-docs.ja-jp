---
title: Azure Lab Services - 管理者ガイド | Microsoft Docs
description: このガイドは、Azure Lab Services を使用してラボ アカウントを作成および管理する管理者にとって役立ちます。
services: lab-services
documentationcenter: na
author: spelluru
manager: ''
editor: ''
ms.service: lab-services
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/19/2019
ms.author: spelluru
ms.openlocfilehash: 1c26e5c6b4bd484b643182e9e4ade3d71929fdba
ms.sourcegitcommit: f4f626d6e92174086c530ed9bf3ccbe058639081
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/25/2019
ms.locfileid: "75476901"
---
# <a name="azure-lab-services---administrator-guide"></a>Azure Lab Services - 管理者ガイド
組織のクラウド リソースを管理する情報技術 (IT) 管理者は、通常、組織のラボ アカウントを設定する役割も担います。 管理者または教師は、ラボ アカウントにクラスルーム ラボを作成します。 この記事では、関連する Azure リソースの概要と、それらを作成するためのガイダンスを示します。

![ラボ アカウントの Azure リソースの概要](../media/administrator-guide/high-level-view.png)

- クラスルーム ラボは、Azure Lab Services が所有する Azure サブスクリプション内でホストされます。
- ラボ アカウント、共有イメージ ギャラリー、イメージ バージョンは、お客様のサブスクリプション内でホストされます。
- ラボ アカウントと共有イメージ ギャラリーは、同じリソース グループに含めることができます。 この図では、これらは異なるリソース グループに含まれています。 

## <a name="subscription"></a>サブスクリプション
組織には 1 つ以上の Azure サブスクリプションがあります。 サブスクリプションを使用して、ラボ アカウントなど、サブスクリプション内で使用されるすべてのAzure リソース/サービスの課金とセキュリティを管理します。

次の理由から、ラボ アカウントとそのサブスクリプションの関係は重要です。

- 課金は、ラボ アカウントを含むサブスクリプションを通じて報告されます。
- サブスクリプションに関連付けられている Azure Active Directory (AD) テナントのユーザーに、Azure Lab Services へのアクセス権を付与できます。 ラボ アカウント所有者/共同作成者またはクラスルーム ラボ作成者としてユーザーを追加できます。

クラスルーム ラボとその仮想マシン (VM) は完全に管理されています。 具体的には、Azure Lab Services が所有する専用サブスクリプション内でホストされています。

## <a name="resource-group"></a>Resource group
サブスクリプションには、1 つ以上のリソース グループが含まれます。 リソース グループを使用して、同じソリューション内で一緒に使用される Azure リソースの論理グループを作成します。  

ラボ アカウントを作成するときには、そのラボ アカウントを含むリソース グループを構成する必要があります。 

リソース グループは、[共有イメージ ギャラリー](#shared-image-gallery)を作成するときにも必要となります。 ラボ アカウントと共有イメージ ギャラリーは、2 つの異なるリソース グループに配置できます。これは、さまざまなソリューション間でイメージ ギャラリーを共有する場合に一般的です。 または、これらを同じリソース グループに配置することもできます。

ラボ アカウントを作成し、同時に共有イメージ ギャラリーを自動的に作成してアタッチすると、ラボ アカウントと共有イメージ ギャラリーが既定で別々のリソース グループに作成されます。 この動作は、[ラボ アカウントの作成時に共有イメージ ギャラリーを構成する](how-to-attach-detach-shared-image-gallery.md#configure-at-the-time-of-lab-account-creation)方法に関するチュートリアルで説明する手順の使用時に確認できます。 この記事の上記の図でも、この構成を使用しています。 

ラボ アカウントまたは共有イメージ ギャラリーのリソース グループは、作成後に変更することができないため、事前に時間をかけてリソース グループの構造を計画することをお勧めします。 これらのリソースのリソース グループを変更する必要がある場合は、ラボ アカウント/共有イメージ ギャラリーを削除して再作成する必要があります。

## <a name="lab-account"></a>ラボ アカウント
ラボ アカウントは、1 つ以上のクラスルーム ラボのコンテナーとして機能します。 Azure Lab Services の使用を開始するときは、ラボ アカウントを 1 つだけ用意するのが一般的です。 ラボの使用状況に応じて、追加のラボ アカウントを後で作成することもできます。

複数のラボ アカウントが役立つ可能性のあるシナリオを以下に示します。

- **複数のクラスルーム ラボのさまざまなポリシー要件を管理する** 

    ラボ アカウントを設定するときは、ラボ アカウントのすべてのクラスルーム ラボに適用される次のようなポリシーを設定します。
    - クラスルーム ラボがアクセスできる共有リソースがある Azure 仮想ネットワーク。 たとえば、仮想ネットワーク内の共有データ セットへのアクセスを必要とする一連のクラスルーム ラボがある場合があります。
    - クラスルーム ラボが VM の作成に使用できる仮想マシン (VM) イメージ。 たとえば、[Data Science VM for Linux](https://azuremarketplace.microsoft.com/marketplace/apps/microsoft-dsvm.linux-data-science-vm-ubuntu) Marketplace イメージへのアクセスを必要とする一連のクラスルーム ラボがある場合があります。  

    それぞれ独自のポリシー要件を持つクラスルーム ラボがある場合は、これらのクラスルーム ラボを個別に管理するために、個別のラボ アカウントを作成すると便利です。
- **ラボ作成者のアクセスを特定のクラスルーム ラボに制限する**  

    ユーザーは、ラボ作成者として追加されると、他のラボ作成者が作成したラボを含め、ラボ アカウント内のすべてのクラスルーム ラボへのアクセス権が付与されます。 ラボ作成者を特定のラボの管理に制限するために、個別のラボ アカウントを作成してアクセスの範囲を制限できます。 たとえば、大学内の学部ごとに個別のラボ アカウントを作成できます (科学学部用のラボ アカウント、数学学部用のラボ アカウントなど)。   
- **ラボ アカウントごとに予算を分ける**

    1 つのラボ アカウントに対してすべてのクラスルーム ラボのコストを報告するのではなく、予算をより明確に分けることが必要な場合があります。 上記の箇条書きの例を引き続き使用すると、大学の学部ごとにラボ アカウントを作成し、それに応じて予算を分けることができます。 その後、Azure Cost Management を使用して、個々のラボ アカウントのコストを表示できます。
•   **パイロット ラボをアクティブ ラボから分離する**

    アクティブ ラボに影響を与えることなく、ポリシーの変更をラボ アカウントに試験的に適用することが必要な場合があります。 この種のシナリオでは、パイロット用に別のラボ アカウントを作成することで変更を分離できます。 

## <a name="classroom-lab"></a>クラスルーム ラボ
クラスルーム ラボには、それぞれ特定の学生に割り当てられた 1 つ以上の仮想マシン (VM) が含まれます。 一般に、次のことを想定できます。

- クラスごとに 1 つのクラスルーム ラボがあります。
- 学期ごと (またはクラスが提供される期間ごと) にクラスルーム ラボの新しいセットを作成します。通常、イメージの同じニーズを持つクラスでは、[共有イメージ ギャラリー](#shared-image-gallery)を使用して、ラボや学期間でイメージを共有します。

クラスルーム ラボを構築する方法を決定する際には、次の点を考慮してください。

- **クラスルーム ラボ内のすべての VM は、発行されている同じイメージを使用してデプロイされます**。 そのため、さまざまなラボ イメージを同時に発行する必要があるクラスがある場合は、イメージごとに別々のクラスルーム ラボを作成する必要があります。
- **使用量クォータはラボ レベルで設定され、ラボ内のすべてのユーザーに適用されます**。 たとえば、講義の準備をするためにクラスの VM へのアクセスを必要とする教師がいるとします。教師に必要なクォータは 10 時間だけですが、クラスに登録している学生には 40 時間のクォータが必要です。 この場合、ユーザーに異なるクォータを設定するには、個別のクラスルーム ラボを作成する必要があります。 ただし、クォータを設定したら、特定のユーザーに対して時間を追加することができます。
- **起動またはシャットダウンのスケジュールはラボ レベルで設定され、ラボ内のすべての VM に適用されます**。 前の点と同様に、ユーザーに異なるスケジュールを設定する必要がある場合は、個別のクラスルーム ラボを作成する必要があります。 

## <a name="shared-image-gallery"></a>共有イメージ ギャラリー
共有イメージ ギャラリーはラボ アカウントにアタッチされ、イメージを保存するための中央リポジトリとして機能します。 教師がクラスルーム ラボのテンプレート仮想マシン (VM) から保存することを選択すると、イメージがギャラリーに保存されます。 教師がテンプレート VM に変更を加えて保存するたびに、以前のバージョンを維持しながら、イメージの新しいバージョンが保存されます。

講師は、新しいクラスルーム ラボを作成するときに、共有イメージ ギャラリーからイメージ バージョンを発行できます。 ギャラリーにはイメージの複数のバージョンを保存できますが、教師がラボの作成時に選択できるのは最新バージョンに限られます。

共有イメージ ギャラリーはオプションのリソースであり、ごく少数のクラスルーム ラボから開始する場合、すぐに必要になることはありません。 ただし、共有イメージ ギャラリーを使用すると、クラスルーム ラボを増やして規模を拡大する際に役立つ多くの利点が得られます。

- **テンプレート VM イメージの複数のバージョンを保存して管理できる**

    カスタム イメージを作成したり、パブリック Marketplace ギャラリーのイメージに変更 (ソフトウェア、構成など) を加えたりする場合に便利です。  たとえば、教師が別のソフトウェアやツールをインストールする必要があることがよくあります。 これらの前提条件を各自が手動でインストールするよう学生に要求するのではなく、テンプレート VM イメージのさまざまなバージョンを共有イメージ ギャラリーに保存できます。 これにより、新しいクラスルーム ラボを作成するときに、これらのイメージ バージョンを使用できます。
- **クラスルーム ラボ間でテンプレート VM イメージを共有/再利用できる**

    新しいクラスルーム ラボを作成するたびに、イメージを最初から構成する必要がなくなります。 たとえば、同じイメージを必要とする複数のクラスが提供されている場合、このイメージを一度作成し、共有イメージ ギャラリーに保存するだけで、クラスルーム ラボ間で共有できるようになります。
- **レプリケーションによってイメージの可用性を確保する**

    クラスルーム ラボから共有イメージ ギャラリーに保存すると、イメージは同じ地域内の他のリージョンに自動的にレプリケートされます。 あるリージョンで停止が発生した場合、他のリージョンのイメージ レプリカを使用できるので、クラスルーム ラボでのテンプレート VM の発行に影響を及ぼすことはありません。 さらに、さまざまなレプリカを使用できるように分散させることで、マルチ VM 発行のシナリオでのパフォーマンスが向上します。

共有イメージを論理的にグループ化する場合、次の 2 つのオプションがあります。

- 複数の共有イメージ ギャラリーを作成します。 各ラボ アカウントが接続できる共有イメージ ギャラリーは 1 つに限られるため、このオプションでは複数のラボ アカウントを作成することも必要になります。
- または、複数のラボ アカウントで共有する 1 つの共有イメージ ギャラリーを使用します。 この場合、各ラボ アカウントでは、そのアカウントに含まれるクラスルーム ラボに適用されるイメージだけを有効にすることができます。

## <a name="naming"></a>名前を付ける
Azure Lab Services の使用を開始するときは、リソース グループ、ラボ アカウント、クラスルーム ラボ、共有イメージ ギャラリーの名前付け規則を確立することをお勧めします。 確立する名前付け規則は組織のニーズに固有のものになりますが、次の表に一般的なガイドラインを示します。

| リソースの種類 | Role | 提案されるパターン | 例 |
| ------------- | ---- | ----------------- | -------- | 
| Resource group | 1 つ以上のラボ アカウントと 1 つ以上の共有イメージ ギャラリーが含まれます。 | \<組織の短い名前\>-\<環境\>-rg<ul><li>**組織の短い名前**は、リソース グループがサポートする組織の名前を示します。</li><li>**環境**は、リソースの環境 (テストや運用など) を示します。</li><li>**rg** は、リソースの種類 (リソース グループ) を表します。</li></ul> | contosouniversitylabs-rg<br/>contosouniversitylabs-test-rg<br/>contosouniversitylabs-prod-rg |
| ラボ アカウント | 1 つ以上のラボが含まれます。 | \<組織の短い名前\>-\<環境\>-la<ul><li>**組織の短い名前**は、リソース グループがサポートする組織の名前を示します。</li><li>**環境**は、リソースの環境 (テストや運用など) を示します。</li><li>**la** は、リソースの種類 (ラボ アカウント) を表します。</li></ul> | contosouniversitylabs-la<br/>mathdeptlabs-la<br/>sciencedeptlabs-test-la<br/>sciencedeptlabs-prod-la |
| クラスルーム ラボ | 1 つ以上の VM が含まれます。 |\<クラス名\>-\<期間\>-\<教師識別子\><ul><li>**クラス名**は、ラボがサポートするクラスの名前を示します。</li><li>**期間**は、クラスが提供される期間を示します。</li>**教師識別子**は、ラボを所有する教師を示します。</li></ul> | CS1234-fall2019-johndoe<br/>CS1234-spring2019-johndoe | 
| 共有イメージ ギャラリー | 1 つ以上の VM イメージ バージョンが含まれます。 | \<組織の短い名前\>gallery | contosouniversitylabsgallery |

他の Azure リソースの名前付けの詳細については、[Azure リソースの名前付け規則](/azure/architecture/best-practices/naming-conventions)に関する記事をご覧ください。

## <a name="regions-or-locations"></a>リージョンまたは場所
Azure Lab Services のリソースを設定する場合、リソースをホストするデータ センターのリージョンまたは場所を指定する必要があります。 ここでは、リージョン/場所が、Lab Services デプロイで使用される以下の各リソースに及ぼす影響について詳しく説明します。

- **リソース グループ**

    リージョンは、リソース グループに関する情報が保存されるデータ センターを示しています。 リソース グループに含まれている Azure リソースは、その親とは異なるリージョンに配置できます。
- **ラボ アカウントまたはクラスルーム ラボ**

    ラボ アカウントの場所は、このリソースのリージョンを示しています。 ラボ アカウントに作成されたクラスルーム ラボは、同じ地域内の任意のリージョンにデプロイできます。 ラボの VM のデプロイ先となるリージョンは、その時点でリージョンで利用可能な容量に基づいて自動的に選択されます。  
    管理者がラボ作成者にクラスルーム ラボの場所を選択することを許可している場合、選択できる場所は、ラボの作成時に利用可能なリージョンの容量に基づきます。

    また、クラスルーム ラボの場所によって、選択できる VM コンピューティング サイズも決まります。 特定のコンピューティング サイズは、特定の場所でのみ利用できます。
- **共有イメージ ギャラリー**

    リージョンは、最初のイメージ バージョンがターゲット リージョンに自動的にレプリケートされる前に保存されるソース リージョンを示しています。
    
原則として、リソースのリージョン/場所をユーザーに最も近いものに設定します。 クラスルーム ラボの場合、学生の最も近くにクラスルーム ラボを作成することを意味します。 学生が世界中にいるオンライン コースの場合は、慎重に検討して、中心に位置するクラスルーム ラボを作成する必要があります。 または、学生のリージョンに基づいてクラスを複数のクラスルーム ラボに分割します。

## <a name="vm-sizing"></a>VM のサイズ設定
管理者またはラボ作成者は、クラスルーム ラボを作成するときに、クラスルームのニーズに基づいて次の VM サイズから選択できます。 利用可能なコンピューティング サイズは、ラボ アカウントがあるリージョンによって異なることに注意してください。

| Size | 仕様 | 推奨される用途 |
| ---- | ----- | ------------- |
| Small| <ul><li>2 コア</li><li>3.5 GB RAM</li></ul> | このサイズは、コマンド ライン、Web ブラウザーの起動、トラフィックが少ない Web サーバー、中小規模のデータベースに最適です。 |
| Medium | <ul><li>4 コア</li><li>7 GB RAM</li></ul> | このサイズは、リレーショナル データベース、メモリ内 Caching、および分析に最適です。 |
| 中 (入れ子になった仮想化) | <ul><li>4 コア</li><li>16 GB RAM</li></ul> | このサイズは、リレーショナル データベース、メモリ内 Caching、および分析に最適です。  また、このサイズは入れ子になった仮想化もサポートしています。 |
| Large | <ul><li>8 コア</li><li>32 GB RAM</li></ul> | このサイズは、高速の CPU、ローカル ディスクのよりすぐれたパフォーマンス、大規模なデータベース、大きなメモリ キャッシュを必要とするアプリケーションに最適です。  また、このサイズは入れ子になった仮想化もサポートしています。 |
| Small GPU (視覚化) | <ul><li>6 コア</li><li>56 GB RAM</li> | このサイズは、リモートの視覚化、ストリーミング、ゲーム、OpenGL や DirectX などのフレームワークを使用したエンコードに最適です。 |
| Small GPU (Compute) | <ul><li>6 コア</li><li>56 GB RAM</li></ul> |このサイズは、人工知能やディープ ラーニングなどのコンピューティング集中型のアプリケーションに最適です。 |
| Medium GPU (視覚化) | <ul><li>12 コア</li><li>112 GB RAM</li></ul> | このサイズは、リモートの視覚化、ストリーミング、ゲーム、OpenGL や DirectX などのフレームワークを使用したエンコードに最適です。 |

## <a name="manage-identity"></a>ID の管理
ラボ アカウント管理者には、次の 2 種類のロールを割り当てることができます。

- **[所有者]**

    **所有者**ロールが割り当てられた管理者は、ラボ アカウントへのフル アクセス権を持ちます。これには、他のユーザーにラボ アカウントへのアクセス権を付与し、ラボ作成者を追加する権限が含まれます。 既定でラボ アカウントを作成する管理者は、所有者として追加されます。
- **Contributor**

    共同作成者ロールが割り当てられた管理者は、ラボ アカウントの設定を変更できますが、他のユーザーにアクセス権を付与することはできません。また、ラボ作成者を追加することもできません。

共有イメージ ギャラリーをラボ アカウントにアタッチすると、管理者とラボ作成者の両方にアクセス権が自動的に付与されるので、どちらもギャラリーでイメージを表示および保存できます。 

## <a name="pricing"></a>価格

### <a name="azure-lab-services"></a>Azure Lab Services
Azure Lab Services の価格については、「[Azure Lab Services の価格](https://azure.microsoft.com/pricing/details/lab-services/)」をご覧ください。

イメージ バージョンの保存と管理に共有イメージ ギャラリーを使用する場合は、その価格も検討する必要があります。 

### <a name="shared-image-gallery"></a>共有イメージ ギャラリー
共有イメージ ギャラリーの作成とラボ アカウントへのアタッチは無料です。 イメージ バージョンをギャラリーに保存するまで、コストは発生しません。 通常、共有イメージ ギャラリーの使用料金はごくわずかですが、Azure Lab Services の価格には含まれていないため、計算方法を理解しておくことが重要です。  

### <a name="storage-charges"></a>ストレージ料金
イメージ バージョンを保存するために、共有イメージ ギャラリーでは Standard HDD マネージド ディスクを使用します。 使用される HDD マネージド ディスクのサイズは、保存されるイメージ バージョンのサイズによって異なります。 価格については、「[Managed Disks の価格](https://azure.microsoft.com/pricing/details/managed-disks/)」をご覧ください。


### <a name="replication-and-network-egress-charges"></a>レプリケーションとネットワーク エグレス料金
クラスルーム ラボのテンプレート仮想マシン (VM) を使用してイメージ バージョンを保存すると、Lab Services によって、まずソース リージョンに保存され、次にソース イメージ バージョンが 1 つ以上のターゲット リージョンに自動的にレプリケートされます。 Azure Lab Services では、クラスルーム ラボが配置されている地理的な場所にあるすべてのターゲット リージョンに、ソース イメージ バージョンが自動的にレプリケートされることに注意してください。 たとえば、クラスルーム ラボが米国内にある場合、イメージ バージョンは米国内に存在する 8 つの各リージョンにレプリケートされます。

イメージ バージョンがソース リージョンから追加のターゲット リージョンにレプリケートされると、ネットワーク エグレス料金が発生します。 請求額は、イメージのデータがソース リージョンから外部に最初に転送されたときのイメージ バージョンのサイズに基づきます。  価格の詳細については、「[帯域幅の料金詳細](https://azure.microsoft.com/pricing/details/bandwidth/)」をご覧ください。

[教育機関向けソリューション](https://www.microsoft.com/licensing/licensing-programs/licensing-for-industries?rtc=1&activetab=licensing-for-industries-pivot:primaryr3)のお客様は、エグレス料金の支払いを免除される場合があります。 詳細については、アカウント マネージャーにお問い合わせください。  詳細については、リンク先ドキュメントの「**FAQ**」セクション (具体的には、「教育機関のお客様向けのどんなデータ転送プログラムがありますか? 資格を得るにはどうすればよいですか?」という質問) をご覧ください。

### <a name="pricing-example"></a>価格の例
上記の価格を整理するために、テンプレート VM イメージを共有イメージ ギャラリーに保存する例を見てみましょう。 次のシナリオを想定します。

- カスタム VM イメージが 1 つある。
- イメージの 2 つのバージョンを保存する。
- ラボは米国にあり、米国には合計 8 つのリージョンがある。
- 各イメージ バージョンのサイズは 32 GB であるため、HDD マネージド ディスクの価格は月額 1.54 ドルになる。

合計コストは次のように概算できます。

イメージの数 × バージョンの数 × レプリカの数 × マネージド ディスクの価格

この例では、コストは次のとおりです。

1 カスタム イメージ (32 GB) x 2 バージョン x 8 米国リージョン x 1.54 ドル = 月額 24.64 ドル

### <a name="cost-management"></a>コスト管理
ラボ アカウント管理者は、不要なイメージ バージョンをギャラリーから定期的に削除してコストを管理することが重要です。 

コストを削減する方法として、特定のリージョンへのレプリケーションを削除しないでください (このオプションは共有イメージ ギャラリーに存在します)。 レプリケーションを変更すると、共有イメージ ギャラリー内に保存されたイメージから VM を発行する、Azure Lab Service の機能に悪影響を及ぼすおそれがあります。

## <a name="next-steps"></a>次のステップ
ラボ アカウントとラボを作成する手順については、[ラボ アカウントの設定に関するチュートリアル](tutorial-setup-lab-account.md)をご覧ください。