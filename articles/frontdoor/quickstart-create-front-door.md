---
title: クイック スタート:アプリケーションの高可用性を実現する Front Door プロファイルを作成する
description: このクイック スタート記事では、高可用性で高パフォーマンスのグローバル Web アプリケーション向けのフロント ドアを作成する方法について説明します。
services: front-door
documentationcenter: ''
author: sharad4u
editor: ''
ms.assetid: ''
ms.service: frontdoor
ms.devlang: na
ms.topic: quickstart
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/31/2018
ms.author: sharadag
ms.openlocfilehash: 2b44c0cdbe2d955efe20a5f9473a29bc9f500a07
ms.sourcegitcommit: b0ff9c9d760a0426fd1226b909ab943e13ade330
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/01/2020
ms.locfileid: "80521449"
---
# <a name="quickstart-create-a-front-door-for-a-highly-available-global-web-application"></a>クイック スタート:グローバル Web アプリケーションの高可用性を実現するフロント ドアを作成する

このクイック スタートでは、グローバル Web アプリケーションに高可用性と高パフォーマンスを提供するフロント ドア プロファイルを作成する方法について説明します。 

このクイック スタートで取り上げるシナリオでは、それぞれ異なる Azure リージョンで稼働する 2 つの Web アプリケーション インスタンスを使用します。 アプリケーションを実行しているサイト バックエンドの最も近いセットにユーザー トラフィックを転送するのに役立つ、等しい[重み付けと同じ優先度のバックエンド](front-door-routing-methods.md)に基づくフロント ドア構成が作成されます。 Web アプリケーションは Front Door によって常時監視されており、最も近いサイトが利用できない状態になると、使用可能な次のバックエンドへの自動フェールオーバーが行われます。

Azure サブスクリプションをお持ちでない場合は、開始する前に [無料アカウント](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) を作成してください。

## <a name="sign-in-to-azure"></a>Azure へのサインイン 
Azure Portal ( https://portal.azure.com ) にサインインします。

## <a name="prerequisites"></a>前提条件
このクイック スタートは、それぞれ異なる Azure リージョン ("*米国東部*" と "*西ヨーロッパ*") で稼働する 2 つの Web アプリケーション インスタンスがデプロイされていることを前提としています。 どちらの Web アプリケーション インスタンスもアクティブ/アクティブ モードで実行しています。つまり、一方がフェールオーバーとして機能するアクティブ/スタンバイ構成とは異なり、常に両方ともトラフィックを受け取ることができます。

1. 画面の左上で、 **[リソースの作成]**  >  **[Web]**  >  **[Web アプリ]** の順に選択します。
2. **[Web アプリ]** で、次の情報を入力または選択します。指定がない箇所には、既定の設定を入力してください。

     | 設定         | 値     |
     | ---              | ---  |
     | Resource group          | **[新規]** を選択し、「*myResourceGroupFD1*」と入力します。 |
     | 名前           | Web アプリの一意の名前を入力します。  |
     | ランタイム スタック          | アプリのランタイム スタックを選択します。 |
     |      リージョン  |   米国西部        |
     | App Service プラン/場所         | **[新規]** を選択します。  [App Service プラン] に「*myAppServicePlanEastUS*」と入力し、 **[OK]** を選択します。| 
     |SKU とサイズ  | **[Change Size]\(サイズの変更\)** を選択し、 **[Standard S1 100 total ACU, 1.75 GB memory]\(Standard S1 合計 100 ACU、1.75 GB メモリ\)** を選択します。 |
     
3. **[確認および作成]** を選択します。
4. Web アプリのサマリー情報を確認します。 **［作成］** を選択します
5. 約 5 分後、Web アプリが正常にデプロイされると、既定の Web サイトが作成されます。
6. 手順 1. から手順 3. を繰り返して、別の Azure リージョンに次の設定で 2 つ目の Web サイトを作成します。

     | 設定         | 値     |
     | ---              | ---  |
     | Resource group          | **[新規]** を選択し、「*myResourceGroupFD2*」と入力します。 |
     | 名前           | Web アプリの一意の名前を入力します。  |
     | ランタイム スタック          | アプリのランタイム スタックを選択します。 |
     |      リージョン  |   西ヨーロッパ      |
     | App Service プラン/場所         | **[新規]** を選択します。  [App Service プラン] に「*myAppServicePlanWestEurope*」と入力し、 **[OK]** を選択します。|   
     |SKU とサイズ  | **[Change Size]\(サイズの変更\)** を選択し、 **[Standard S1 100 total ACU, 1.75 GB memory]\(Standard S1 合計 100 ACU、1.75 GB メモリ\)** を選択します。 |
    
## <a name="create-a-front-door-for-your-application"></a>アプリケーション用のフロント ドアを作成する
### <a name="a-add-a-frontend-host-for-front-door"></a>A. フロント ドア用のフロントエンド ホストを追加する
2 つのバックエンド間の最短の待機時間に基づいてユーザー トラフィックを転送するフロント ドア構成を作成します。

1. 画面の左上で、 **[リソースの作成]**  >  **[ネットワーキング]**  >  **[Front Door]** を選択します。
2. **[フロント ドアを作成する]** で、次の情報を入力または選択します。指定がない箇所には、既定の設定を入力してください。

     | 設定         | 値     |
     | ---              | ---  |
     |サブスクリプション  | Front Door を作成するサブスクリプションを選択します。|
     | Resource group          | **[新規]** を選択し、「*myResourceGroupFD0*」と入力します。 |
     | リソース グループの場所  |   米国中部        |
     
     > [!NOTE]
     > Front Door のデプロイ先となるリソース グループを新たに作成する必要はありません。  既存のリソース グループを選択することもできます。
     
3. **[次へ: 構成]** を選択します。
4. [Frontends/domains]\(フロントエンド/ドメイン\) カードの [+] アイコンをクリックします。  **[ホスト名]** に「`<Your Initials>frontend`」と入力します。 このホスト名はグローバルに一意である必要がありますが、Front Door が検証を処理します。
5. **[追加]** をクリックします。

### <a name="b-add-application-backend-and-backend-pools"></a>B. アプリケーション バックエンドとバックエンド プールを追加する

次に、Front Door 用のバックエンド プールでフロントエンド/ドメインとアプリケーション バックエンドを構成し、アプリケーションが存在する場所を指定する必要があります。 

1. [バックエンド プール] カードの [+] アイコンをクリックして、バックエンド プールの **[名前]** にバックエンド プールを追加し、「`myBackendPool`」と入力します。
2. 次に、 **[バックエンドの追加]** をクリックして、前に作成した Web サイトを追加します。
3. **[バックエンド ホストの種類]** に [App Service] を選択し、Web サイトを作成したサブスクリプションを選択して、 **[バックエンド ホスト名]** ボックスの一覧から 1 つ目の Web サイトを選択します。
4. 他のフィールドはそのままにして、 **[追加]** をクリックします。
5. **[バックエンド ホストの種類]** に [App Service] を選択し、Web サイトを作成したサブスクリプションを選択して、 **[バックエンド ホスト名]** ボックスの一覧から **2 つ目**の Web サイトを選択します。
6. 他のフィールドはそのままにして、 **[追加]** をクリックします。
7. 必要に応じて、バックエンド プールの正常性プローブと負荷分散の設定を更新できますが、既定値でも動作します。 どちらの場合も、 **[追加]** をクリックします。


### <a name="c-add-a-routing-rule"></a>C. ルーティングの規則を追加する
1. 最後に、[ルーティング規則] カードで [+] アイコンをクリックしてルーティング規則を構成します。 これはフロントエンド ホストをバックエンド プールにマップするために必要であり、基本的に、`myappfrontend.azurefd.net` に要求が届いたらバックエンド プール `myBackendPool` に転送するように構成します。 
2. **[名前]** に「LocationRule」と入力します。
3. **[追加]** をクリックして、フロント ドアにルーティング規則を追加します。 
4. **[確認と作成]** をクリックします。
5. Front Door の作成に使用する設定を確認します。 **[作成]**

>[!WARNING]
> Front Door 内の各フロントエンド ホストに、既定のパス ("/\*") が関連付けられたルーティング規則があることを、確認する**必要があります**。 つまり、すべてのルーティング規則について、既定のパス ("/\*") で定義された各フロントエンド ホストに対するルーティング規則が少なくとも 1 つは存在する必要があります。 そうなっていないと、エンド ユーザーのトラフィックが正しくルーティングされない可能性があります。

## <a name="view-front-door-in-action"></a>フロント ドアの動作を確認する
フロント ドアを作成した後、すべての場所にグローバルに構成が展開されるまで数分かかります。 完了したら、作成したフロントエンド ホストにアクセスします。つまり、Web ブラウザーに移動し、URL `myappfrontend.azurefd.net` にアクセスします。 要求は、バックエンド プール内の指定されたバックエンドで最も近いものに自動的にルーティングされます。 

### <a name="view-front-door-handle-application-failover"></a>フロント ドア ハンドルのアプリケーション フェールオーバーを表示する
フロント ドアの即時グローバル フェールオーバーの動作をテストする場合は、作成した Web サイトの 1 つにアクセスして停止します。 バックエンド プールに対して定義されている正常性プローブの設定に基づき、即座に他の Web サイトのデプロイにトラフィックがフェールオーバーされます。 フロント ドアに対するバックエンド プール構成でバックエンドを無効にして、動作をテストすることもできます。 

## <a name="clean-up-resources"></a>リソースをクリーンアップする
**myResourceGroupFD1**、**myResourceGroupFD2**、**myResourceGroupFD0** の各リソース グループは、不要になったら削除してください。

## <a name="next-steps"></a>次のステップ
このクイック スタートでは、高可用性と最大のパフォーマンスを必要とする Web アプリケーションのためにユーザー トラフィックを転送できるフロント ドアを作成しました。 トラフィックのルーティングについて詳しくは、フロント ドアによって使用される[ルーティング方法](front-door-routing-methods.md)に関するページをご覧ください。
