---
title: マッピング データ フローをパラメーター化する
description: データ ファクトリのパイプラインからマッピング データ フローをパラメーター化する方法について学習します
author: kromerm
ms.author: makromer
ms.reviewer: daperlov
ms.service: data-factory
ms.topic: conceptual
ms.date: 01/07/2020
ms.openlocfilehash: c717d9ab44493d15589030073cd2ab260ef52e1c
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/27/2020
ms.locfileid: "76760217"
---
# <a name="parameterizing-mapping-data-flows"></a>マッピング データ フローをパラメーター化する

Azure Data Factory のマッピング データ フローでは、パラメーターの使用をサポートします。 ご利用のデータ フローの定義内でパラメーターを定義できます。その後、これは自分の式全体で使用することができます。 パラメーター値は、データ フローの実行アクティブティ経由でパイプラインを呼び出すことにより設定できます。 データ フロー アクティビティの式で値を設定するには、次の 3 つのオプションがあります。

* パイプラインの制御フローの式を使用して動的な値を設定する
* データ フロー式の言語を使用して動的な値を設定する
* いずれかの式の言語を使用して静的なリテラル値を設定する

この機能を使用して、ご利用のデータ フローを汎用的かつ柔軟性があり、再利用可能なものにします。 3 つのパラメーターを使って、データ フローの設定と式をパラメーター化することができます。

## <a name="create-parameters-in-a-mapping-data-flow"></a>マッピング データ フローでのパラメーターの作成

ご利用のデータ フローにパラメーターを追加するには、データ フローのキャンバスの空白部分をクリックして、全般プロパティを表示します。 [設定] ウィンドウに、 **[パラメーター]** という名前のタブが表示されます。 新しいパラメーターを生成するには **[新規]** を選択します。 パラメーターごとに、名前を割り当て、型を選択し、必要に応じて既定値を設定する必要があります。

![データ フローのパラメーターを作成する](media/data-flow/create-params.png "データ フローのパラメーターを作成する")

## <a name="use-parameters-in-a-mapping-data-flow"></a>マッピング データ フローでのパラメーターの使用 

パラメーターは任意のデータ フロー式で参照できます。 パラメーターは $ で始まり、変更することはできません。 式ビルダー内で利用可能なパラメーターの一覧が **[パラメーター]** タブに表示されます。

![データ フロー パラメーター式](media/data-flow/parameter-expression.png "データ フロー パラメーター式")

**[新しいパラメーター]** を選択して [名前] と [種類] を指定することで、パラメーターを簡単に追加できます。

![データ フロー パラメーター式](media/data-flow/new-parameter-expression.png "データ フロー パラメーター式")

### <a name="passing-in-a-column-name-as-a-parameter"></a>パラメーターとして列名を渡す

一般的なパターンは、列名をパラメーター値として渡すことです。 パラメーターに関連付けられている列を参照するには、`byName()` 関数を使用します。 `toString()` などのキャスト関数を使用して、列を適切な型にキャストすることを忘れないでください。

たとえば、パラメーター `columnName` に基づいて文字列型の列をマップする場合は、`toString(byName($columnName))` に等しい派生列変換を追加できます。

![パラメーターとして列名を渡す](media/data-flow/parameterize-column-name.png "パラメーターとして列名を渡す")

## <a name="assign-parameter-values-from-a-pipeline"></a>パイプラインからパラメーター値を割り当てる

パラメーターを使ってデータ フローを作成したら、データ フローの実行アクティブティを使用してパイプラインからそれを実行できます。 パイプライン キャンバスにアクティビティを追加すると、アクティビティの **[パラメーター]** タブに使用可能なデータ フローのパラメーターが表示されます。

![データ フロー パラメーターの設定](media/data-flow/parameter-assign.png "データ フロー パラメーターの設定")

パラメーターのデータ型が文字列の場合、テキスト ボックスをクリックしてパラメーター値を設定するときに、パイプラインまたはデータ フロー式のいずれかを入力することを選択できます。 パイプライン式を選択した場合、パイプラインの式パネルが表示されます。 `'@{<expression>}'` を使用して、必ず文字列補間の構文内にパイプライン関数を含めてください。たとえば、次のようになります。

```'@{pipeline().RunId}'```

パラメーターが文字列型でない場合、常に Data Flow の式ビルダーが提示されます。 ここで、パラメーターのデータ型に一致させたい任意の式またはリテラル値を入力できます。 式ビルダーからのデータ フロー式とリテラル文字列の例を以下に示します。

* ```toInteger(Role)```
* ```'this is my static literal string'```

各マッピング データ フローには、パイプラインとデータ フロー式のパラメーターの任意の組み合わせを含めることができます。 

![データ フロー パラメーターのサンプル](media/data-flow/parameter-example.png "データ フロー パラメーターのサンプル")



## <a name="next-steps"></a>次のステップ
* [データ フローの実行アクティビティ](control-flow-execute-data-flow-activity.md)
* [制御フローの式](control-flow-expression-language-functions.md)
