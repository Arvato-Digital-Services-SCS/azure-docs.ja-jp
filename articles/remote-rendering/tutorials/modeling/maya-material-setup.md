---
title: Maya で物理ベース レンダリング素材を設定する
description: Maya で物理ベース レンダリング素材を設定し、FBX 形式にエクスポートする方法について説明します
author: muxanickms
ms.author: misams
ms.date: 06/16/2020
ms.topic: tutorial
ms.openlocfilehash: 5579994b0746a2de4b0f2ca927027ac709940024
ms.sourcegitcommit: 9bfd94307c21d5a0c08fe675b566b1f67d0c642d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/17/2020
ms.locfileid: "84977410"
---
# <a name="tutorial-setting-up-physically-based-rendering-materials-in-maya"></a>チュートリアル:Maya で物理ベース レンダリング素材を設定する

## <a name="overview"></a>概要
このチュートリアルでは、以下の内容を学習します。

> [!div class="checklist"]
>
> * 高度なライティング モデルが使用された素材をシーン内のオブジェクトに割り当てる。
> * オブジェクトと素材のインスタンス化を処理する。
> * シーンを FBX 形式にエクスポートする。選択する重要なオプション。

`Maya` での[物理ベース レンダリング (PBR) 素材](../../overview/features/pbr-materials.md)の作成は、比較的単純なタスクであり、`3DS Max` のような他のコンテンツ作成アプリでの PBR の設定と多くの点で類似しています。 次のチュートリアルは、ARR プロジェクトの基本的な PBR シェーダー設定と FBX エクスポートに関するガイドです。 

このチュートリアルのサンプル シーンには、多数の `Polygon Box` オブジェクトが含まれており、各種素材 (木、金属、塗装金属、プラスチック、ゴムなど) が割り当てられています。 大まかに言うと、各素材には次のテクスチャのすべてまたはほとんどが含まれています。 

* `Albedo`: 素材のカラー マップです。`Diffuse` または `BaseColor` とも呼ばれます。
* `Metalness`: 素材が金属であるかどうか、およびどのパーツが金属であるかを決定します。 
* `Roughness`: 表面の粗さや滑らかさを決定し、反射のシャープネスまたはぼかしと表面のハイライトに影響します。
* `Normals`: ポリゴンをさらに追加する必要なく、金属表面のくぼみや傷、木材の木目などのディテールを表面に追加します。
* `Ambient Occlusion`: モデルにソフト シェーディングとコンタクト シャドウを追加するために使用します。 これは、モデルのどの領域が完全な照明 (白) または完全な陰 (黒) を受け取るかを示すグレースケール マップです。 

## <a name="prerequisites"></a>前提条件
* `Autodesk Maya 2017` 以降

## <a name="setting-up-materials-in-the-scene"></a>シーン内の素材の設定
Maya で PBR 素材を設定するプロセスは次のとおりです。

まず、サンプル シーンでご覧のとおり、多数の Box オブジェクトを作成しました。これはそれぞれ、異なる種類の素材を表します。 次の画像に示すように、これらの各オブジェクトにはそれぞれ適切な名前が付けられていることに注意してください。 

> Azure Remote Rendering (ARR) のアセットの作成を開始する前に、測定にメートルが使用され、上方向が Y 軸であることに注目してください。 そのため、Maya のシーンの単位をメートルに設定することをお勧めします。 さらに、エクスポート時には、FBX エクスポートの設定で単位をメートルに設定することをお勧めします。 

> [!TIP]
モデル アセットに適宜名前を付けることをお勧めします。通常は、関連するパーツまたは素材の種類を使用します。名前を付けることで、オブジェクトの多いシーンでのナビゲートが容易になります。

![オブジェクト名](media/object-names.jpg)

テクスチャを作成または取得したら、次のようにテクスチャをモデルに適用することができます。テクスチャは、必要に応じて、`Quixel Suite`、`Photoshop`、`Substance Suite` などのテクスチャ作成アプリでモデルに独自のテクスチャを作成できるほか、他のソースからの汎用タイリング テクスチャを使用することもできます。

* シーン ビューポートで、モデルまたはジオメトリを選択して右クリックします。 表示されるメニューで、[`Assign New Material`]\(新しい素材の割り当て\) をクリックします
* [`Assign New Material`]\(新しい素材の割り当て\) オプションで、[`Maya`]>[`Stingray PBS`] に移動します。 このアクションにより、PBR 素材が対象のモデルに割り当てられます。 

`Maya 2020` には、`Maya Standard Surface`、`Arnold Standard Surface`、`Stingray PBR` など、さまざまな PBR シェーダーが用意されています。 `Maya Standard Surface Shader` はまだ `FBX plugin 2020` を介してエクスポートできませんが、`Arnold Standard Surface Shader` は FBX ファイルを使用してエクスポートできます。 これは他のほとんどの点で `Maya Standard Surface Shader` と同じであり、`3D Studio Max` の `Physical Material` に類似しています。

**`The Stingray PBR Shader`** は他の多くのアプリケーションと互換性があり、`ARR` の要件に最も合致します。これは、`Maya 2017` 以降でサポートされています。 また、ビューポートで視覚化されたこの種類の素材は ARR で後で視覚化されるものと類似する点が便利です。

![`Stingray` 素材](media/stingray-material.jpg)

素材をアセットに割り当て、適宜名前を付けたら、さまざまなテクスチャの割り当てに進むことができます。 次の画像は、各テクスチャの種類が PBR 素材に適合する場所を示しています。 `Stingray PBR` 素材を使用すると、アクティブにできる属性を選択できます。そのため、テクスチャ マップの `plug in` 操作を実行する前に、関連する属性をアクティブにする必要があります。 

![素材の設定](media/material-setup.jpg)

> [!TIP]
素材には、使用方法や種類を考慮して適切な名前を付けることをお勧めします。 固有のパーツで使用される素材には、そのパーツにちなんだ名前が付いている場合があります。一方、より多くの領域で使用できる素材には、そのプロパティまたは種類にちなんだ名前を付けることができます。

次のようにテクスチャを割り当てます。

![テクスチャの設定](media/texture-setup.jpg)

PBR 素材を作成して設定したら、シーン内の[オブジェクトのインスタンス化](../../how-tos/conversion/configure-model-conversion.md#instancing)について検討します。 シーン内の類似オブジェクト (ナット、ボルト、ねじ座金など、基本的に同じオブジェクト) をインスタンス化すると、ファイル サイズの面で大幅な節約が可能になります。 マスター オブジェクトの各インスタンスには、独自のスケール、回転、変換を設定できるため、必要に応じてシーンに配置できます。 Maya でのインスタンス化のプロセスは単純です。

* [`Edit`]\(編集\) メニューで、[`Duplicate Special`]\(特殊な複製\) に移動し、[`Options`]\(オプション\) を開きます。 
* [`Duplicate Special`]\(特殊な複製\) オプションで、[`Geometry Type`]\(ジオメトリ タイプ\) を [`Copy`]\(コピー\) から [`Instance`]\(インスタンス\) に切り替えます。 
* [`Duplicate Special`] をクリックします。

![インスタンス化](media/instancing.jpg)

このアクションにより、オブジェクトのインスタンスが作成されます。これは、その親やその親の他のインスタンスとは関係なく、移動、回転、またはスケーリングできます。 
>ただし、コンポーネント モードの間にインスタンスに加えた変更はすべて、オブジェクトのすべてのインスタンスに転送されます。したがって、インスタンス化されたオブジェクト コンポーネント (頂点、ポリゴン フェースなど) を操作する場合は、最初に、加える変更が必ずこれらのすべてのインスタンスに反映されるようにしてください。

サンプル シーンでは、個々のボックス オブジェクトがインスタンス化されています。 このアクションは、シーンを FBX 形式にエクスポートする際に関連性があります。

![シーンの概要](media/scene-overview.jpg)

>シーン内でのインスタンス化に関するベスト プラクティスは、作業を進めながら作成していくことです。それは、後で "コピー" をインスタンス化されたオブジェクトに置き換えることは非常に難しいためです。 

## <a name="fbx-export-process"></a>FBX エクスポート プロセス

これで、シーンまたはシーン アセットの FBX エクスポート操作に進むことができます。 一般的に、アセットをエクスポートする際は、エクスポートするオブジェクトまたはアセットのみをシーンから選択することが理にかなっています。 シーンに 100 個のオブジェクトがあっても、そのうちの 30 個だけを使用する場合、シーン全体をエクスポートしても意味がありません。 そのため、シーン全体をエクスポートする場合を除き、選択を行った後、次の操作を行います。

* [`File`]\(ファイル\) > [`Export Selection`]\(選択項目のエクスポート\) に移動します。エクスポートのダイアログの下部にある [`Files of Type`]\(フィルの種類\) を [`FBX Export`]\(FBX エクスポート\) に設定します。 このウィンドウには、FBX エクスポート設定が表示されます。 次の画像では、FBX エクスポートのプライマリ設定が赤で強調表示されています。

![FBX エクスポート](media/FBX-exporting.jpg)

要件に応じて (たとえば、アセットをクライアントに送信したいが、アセットと共に多数のテクスチャ ファイルを送信したくない場合など)、エクスポートされる FBX ファイル内にテクスチャを埋め込むことを選択できます。 このオプションはパッケージ化するファイルが 1 つしかないことを意味しますが、FBX アセットのサイズが大幅に増加します。 次に示すように、[`Embed Media`]\(メディアの埋め込み\) オプションをオンにすることで、テクスチャを埋め込むオプションを有効にすることができます。

> [!TIP]
> このケースのファイルにはこの条件を反映する名前が付けられていることに注意してください。 これは、アセットを追跡するのにお勧めの方法です。 

エクスポートの構成を設定し終わったら、右下にある [Export Selection]\(選択項目のエクスポート\) ボタンをクリックします。

![メディアの埋め込み](media/embedding-media.jpg)

## <a name="conclusion"></a>まとめ

一般に、この種の素材は、実際の光の物理特性をベースにしているため、より本物らしく見えます。 シーンが現実の世界に存在するという追加の没入効果が得られます。

## <a name="next-steps"></a>次のステップ

高度なライティングが使用された素材をシーン内のオブジェクトに設定し、ARR でサポートされている FBX 形式にエクスポートする際に最も重要な機能を習得しました。 次の手順では、FBX ファイルを変換し、ARR で視覚化します。

> [!div class="nextstepaction"]
> [クイック スタート: モデルをレンダリング用に変換する](../../quickstarts\convert-model.md)