---
title: フォルダー構造を Azure File Sync トポロジにマップする
description: Azure File Sync で使用するために既存のファイルおよびフォルダー構造を Azure ファイル共有にマップします。移行ドキュメント間で共有する一般的なテキスト ブロック。
author: fauhse
ms.service: storage
ms.topic: conceptual
ms.date: 2/20/2020
ms.author: fauhse
ms.subservice: files
ms.openlocfilehash: 44fb95de88cc86c802e5ba72f0b5379b8708c506
ms.sourcegitcommit: 5192c04feaa3d1bd564efe957f200b7b1a93a381
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/02/2020
ms.locfileid: "78209322"
---
この手順では、必要な Azure ファイル共有の数を評価します。 1 つの Windows Server (またはクラスター) では、最大 30 個の Azure ファイル共有を同期できます。

ユーザーとアプリに対する SMB 共有としてローカルで現在共有している StorSimple に、より多くのフォルダーを保持している場合があります。 最も簡単な方法は、オンプレミスの共有を 1 対 1 で Azure ファイル共有にマッピングするよう検討することです。 この数が管理しやすい小さい数である場合 (つまり、1 つのWindows Server に 30 個未満、または 2 つの Windows Server (60 個) を持つ予定である場合など) は、1 対 1 のマッピングをお勧めします。

30 個を超える共有がある場合、通常、オンプレミスの共有を 1 対 1 で Azure ファイル共有にマッピングする必要はありません。
次のオプションを検討してください。

#### <a name="share-grouping"></a>共有のグループ化

たとえば、人事部に合計 15 個の共有がある場合、すべての人事データを 1 つの Azure ファイル共有に格納することを検討できます。 1 つの Azure ファイル共有にオンプレミスの共有を複数格納しても、ローカルの Windows Server に通常の 15 個の SMB 共有を作成できます。 これは、単にこれらの 15 個の共有のルート フォルダーを共通フォルダーの下のサブフォルダーとして整理することを意味します。 その後、この共通フォルダーを Azure ファイル共有に同期します。 そうすることで、このオンプレミスの共有グループに必要なのは、クラウド内の 1 つの Azure ファイル共有のみとなります。

#### <a name="volume-sync"></a>ボリュームの同期

Azure File Sync では、ボリュームのルートを Azure ファイル共有に同期することをサポートしています。
ルート フォルダーを同期した場合、すべてのサブフォルダーおよびファイルは同じ Azure ファイル共有に格納されます。

#### <a name="other-best-practices-to-consider"></a>考慮すべきその他のベスト プラクティス

サーバーあたり 30 個の Azure ファイル共有という同期制限以外で、主な考慮事項は同期の効率性です。

サーバー上の複数の共有がそれぞれ独自の Azure ファイル共有と同期している場合、同期はそれらのすべてについて並行して動作します。 スケール ベクターは、同期スコープ内のすべてのファイルのサイズではありません。 処理する必要がある項目 (ファイルとフォルダー) の数です。

1 つの Azure ファイル共有で最大 100 TiB を保持できます。
Azure File Sync では、Azure ファイル共有あたり最大 1 億個の項目の同期がサポートされています。

ルート ボリュームの同期は、必ずしも最適な答えとは限りません。 複数の場所を同期することに利点があります。これにより、同期スコープあたりの項目数を低く抑えることができます。 より少数の項目で Azure ファイル同期を設定することは、同期において重要であるだけでなく、クラウド側でのバックアップからの復元においても、サーバーが停止したために同じ Azure ファイル共有に接続する新しいサーバーをプロビジョニングする場合にディザスター リカバリーの速度を促進させる点においてもメリットがあります。

上記の概念を組み合わせて使用し、必要な Azure ファイル共有の数と、既存の StorSimple データのどの部分がどの Azure ファイル共有に格納されるかの判断に役立てます。

次の手順で参照できるように、自分の考えを記録するリストを作成します。 多数のリソースを一度にプロビジョニングする場合は、マッピング計画の詳細がわからなくなりやすいため、ここで整理した状態を保つことが重要です。
